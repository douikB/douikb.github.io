---
title: "[25/07/29] - 클라우드 보안 (7일차)"
date: 2025-07-29 00:00:00 +0900
categories: ['SK 루키즈 교육', '클라우드 보안']
tags: ['교육']
---



---

# ▪︎ AWS 보안 서비스

## ▫︎  AWS SSM(Systems Manager)

- 다수의 EC2 운영 및 애플리케이션, 보안 관리
    - 인벤토리, 패치 관리자, 세션 관리자, 명령어 실행 등

## ▫︎  CloudFormation(IaC : 코드형 인프라)

- 코드(템플릿) 내용 기반으로 AWS 인프라 자동 생성
    - 일관된 AWS 인프라를 신속하게 반복 생성 가능
    - 용어 : stack
- 주요 기능
    - 지표
    - 경보(알람)
    - Logs
    - Event → EventBridge
        - 이벤트 관리
            - 규칙(Rule) : 이벤트 정의, 특정 대상 지정
            - 대상(Target) : 이벤트 처리 서비스(EC2, Lambda, SNS)

# ▪︎ AWS 실습

## ▫︎  CloudFormation

- 스택 생성
    - 기존 템플릿 선택
    - 템플릿 파일 업로드 → lab-network.yaml
    - 스택 이름 : lab-network
    
![image_01](/assets/img/sk_shieldus_26/250729_image_01.png)
    
- VPC 자동으로 생성됨
    
![image_02](/assets/img/sk_shieldus_26/250729_image_02.png)
    
- 새 스택 생성
    - 기존 템플릿 선택
    - 템플릿 파일 업로드 → lab-application.yaml
    - 스택 이름 : lab-application
    - **NetworkStackName : lab-network(안건드림)**
    - 

## ▫︎  Amazon Inspector

- 인스턴스의 워크로드를 자동으로 검색해 소프트웨어 취약성 등을 스캔하는 관리형 서비스
- (잠재적) 보안 취약성 결과 보고
- Agent 기반
- CVE 정보 기반 결과 집계

## ▫︎  AWS 보안 관련 서비스

![image_03](/assets/img/sk_shieldus_26/250729_image_03.png)

## ▫︎  AWS Config

- 리소스 구성 변경을 지속적으로 모니터링, 변경사항 관리
- Rule 기반 점검
- 규정 준수, 미준수 적용
    - 규정 미준수에 대한 보정 : 수동 & 자동
- **Config Rule**
    - AWS 관리형 규칙
        - 가장 일반적인 사용 사례 중 미리 정의된 구성 상태를 평가
    - 사용자 지정 람다 규칙
        - 사용자 지정 논리를 정의하여  리소스의 구성 상태 평가. Python, java 같은 언어로 작성
    - Guard 사용한 사용자 지정 규칙
        - Guard Custom 정책을 사용하여 사용자 규칙을 만들어 리소스 구성 평가

[AWS Config Managed Rules - AWS Config](https://docs.aws.amazon.com/config/latest/developerguide/evaluate-config_use-managed-rules.html)

# ▪︎ AWS 실습

## ▫︎  AWS Config

- 시작하기
- 관리형 규칙 : iam-user-group-membership-check, s3-bucket-public-read-prohibited
- 확인 버튼으로 생성
    
![image_04](/assets/img/sk_shieldus_26/250729_image_04.png)
    

## ▫︎  S3

- 버킷 생성
    - 퍼블릭 차단 해제
    - 정책 편집 → S3 Policy : 모든 행위 허용(`/*`) 설정

## ▫︎  AWS Config

- 미준수 리소스에 해당 버킷이 있는 것 확인
    
![image_05](/assets/img/sk_shieldus_26/250729_image_05.png)
    
![image_06](/assets/img/sk_shieldus_26/250729_image_06.png)
    

## ▫︎  AWS GuardDuty

- 지능형 위협 탐지 서비스
    - 계정 내 워크로드에 악의적인 활동을 모니터링 및 상세 보고
    - Cloudtrail 이벤트 로그, VPC 흐름 로그, DNS 쿼리 로그 등에서 수 백 억 이벤트 분석
- 탐지 분야
    - 정찰 : 공격자의 정찰로 보이는 활동
        - 비정상적 API 활동, 의심스런 로그인 시도, 포트 스캐닝, 알려진 악성IP의 포트 탐색 등
    - 인스턴스 침해 : 인스턴스를 침해를 나타내는 활동
        - 코인 채굴 활동, 백도어 명령, 의심되는 멜웨어, 비정상적 네트워크 트래픽 볼륨 등
    - 계정 침해: 계정 침해를 나타내는 패턴
        - 특이한 지리적 위치나 익명으로부터 접근, CloudTrail 로깅 사용 중지, 특이 리전에서 인프라 배포 등
    - 버킷 침해 : 버킷 침해를 나타내는 활동
        - 알려진 IP로부터 S3 무단 액세스, 비정상적 위치에서 S3 데이터 검색 등
- 의심스러운 호스트를 자동 차단하는 예

## ▫︎  AWS Shield

- DDoS 공격을 방어하기 위해 개발된 AWS 서비스
    - DDoS(Distributed Denial of Service) 공격
        - 서비스 중단을 목적으로 대상 서버, 서비스 혹은 네트워크에 대량의 인터넷 트래픽을 시도하는 악의적인 공격
- AWS 서비스에 내장된 구조로 아키텍처의 큰 변경없이 DDoS 완화를 빠르게 활용
- Shield Standard와 Shield Advanced로 구분

## ▫︎  AWS WAF(Web Application Firewall)

- AWS 웹 애플리케이션 방화벽– ALB, CloudFront, API Gateway에 적용
- WebACL을 구성하여 규칙(rule)이나 특정 패턴에 따른 허용, 거부 설정 가능
- 규칙(rule) 예
    - IP 주소, HTTP 헤더와 본문, URI 문자열
    - SQL Injection, XSS(Cross Site Scripting)
- OWASP Top10와 CVE(Common Vulnerabilities and Exposures) 관련 규칙들을 자동 갱신

## ▫︎  DDoS 공격 완화를 위한 대응 가이드

- 확장이 가능한 서비스 구조 : ELB + AutoScaling
- 공개적으로 노출되는 엔드포인트 노출 최소화
- 웹 애플리케이션 방화벽 사용
- 부하 상황에 대한 서비스 안정성 검증
- 서비스 동작 모니터링 및 경보 설정

## ▫︎  Key 관리 문제

- 다수의 키 관리
- 키 저장 및 교체
- 키 관리 권한 및 사용 권한 제어

## ▫︎  AWS Network Firewall

- 상태 저장/비저장 호환 방화벽
- IP, Port, 프로토콜 유형 기반  통제
- 도메인 기반 통제
- 침입 방지(Suricata IPS 호환 규칙 지원)

# ▪︎ KMS(Key Management Service)

- 암호화 키 관리 서비스
- 키 저장 및 관리, 암호화
- 봉투 암호화
- 2계층 키
- 정책 기반 키 보호
- **키 교체 자동, 비활성화 및 삭제, 키 사용 감사**

## ▫︎  암호화 지침

- 봉투 암호화
    
![image_07](/assets/img/sk_shieldus_26/250729_image_07.png)
    

## ▫︎  키 종류

- AWS 관리형 키
- **고객 생성 마스터 키**
- 가져온 키(Import 된 키)

# ▪︎ AWS 실습

## ▫︎  IAM

- 역할 생성
    - 사용 사례 : EC2
    - 권한 정책 : SSM → AmazonEC2RoleforSSM 선택
    - 역할 이름 : SSMInstancekbkRole

## ▫︎  EC2

- 인스턴스 생성
    - 이름 아무거나 : testserver01
    - 키 페어X
    - Linux 2023, t3.micro
    - MyVPC 설정
    - MyPubSubnet 설정
    - 퍼블릭 IP 자동 할당
    - 인바운드 보안 그룹 규칙 → ssh제거
    - 고급 세부 정보
        - **IAM 인스턴스 프로파일 :** SSMInstancekbkRole 선택

## ▫︎  인스턴스 연결

- testserver01 인스턴스 클릭 → 연결 → Session Manager 선택 후 연결
- Remote Manager 사용할 수 있음
    
![image_08](/assets/img/sk_shieldus_26/250729_image_08.png)
    
- EC2 삭제(종료)