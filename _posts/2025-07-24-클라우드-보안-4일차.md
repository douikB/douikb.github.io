---
title: "[25/07/24] - 클라우드 보안 (4일차)"
date: 2025-07-24 00:00:00 +0900
categories: ['SK 루키즈 교육','클라우드 보안']
tags: ['교육']
---

<!--more-->



---

- 복습
    
    ```bash
    <IAM : 인증 및 권한 제어>
    - root user(email) : 무한 권한
    
    - user
    a. console : username/password
    b. cli/sdk : Access key ID/ Security Access key
    - group
    
    - policy(json) : allow/deny --> 최소 권한 부여 원칙
    a. 관리형 정책 : 반복 부여 -> AWS, 고객
    b. 인라인 정책 : 1회성
    
    - role : 임시 권한 행사
    a. user' : 계정내/계정간
    b. 서비스가 서비스를 접근
    c. 자격 증명 연동
    
    < AWS 리소스 접근 제어 방식 >
    - 사용자 중심 기반 : IAM 정책
    - 리소스 중심 기반 : S3, Glacier, KMS, SQS....
    
    ```
    

# ▪︎ IAM

## ▫︎  권한 경계(permission boundary)

- IAM에서 권한의 최대 범위 제한
- 유저 혹은 역할에 부여할 수 있는 최대 권한을 설정
- 자격 증명 기반 정책과 권한 경계 모두에서 허용되는 작업만 수행하도록 허용 : 교집합 허용

# ▪︎ AWS 실습

## ▫︎  S3

- S3 생성 후 파일 업로드
- 버킷 → 권한 → 퍼블릭 액세스 차단 해제
- 버킷 정책 펴집
    - 정책 생성기
    - **Type of Policy : S3 Bucket Policy**
    - Effect : Allow
    - Principle * (누구에게나 허락)
    - **Actions : All Actions 체크**
    - **Amazon Resource Name (ARN) :** 버킷 ARN 복사해서 붙여넣기
    - Add Statmenet 클릭 후 Generate Policy 클릭
    - Policy JSON Format 내용 복사(Copy Policy)
    - 버킷 정책 편집의 **정책**에 내용 붙여넣기
    - Resource 마지막에 “`/*`” 추가
    
![image_01](/assets/img/sk_shieldus_26/250724_image_01.png)
    
    - 변경사항 저장
- index.html 파일 업로드
- 정적 웹 사이트 호스팅 편집
    - 활성화 클릭
    - 호스팅 유형 : 정적 웹 사이트 호스팅
    - 인덱스 문서 : index.html
    - 생성
    
![image_02](/assets/img/sk_shieldus_26/250724_image_02.png)
    
- 주소 입력후 들어가면 403 Forbidden 뜸
    - 퍼블릭 액세스 차단 해제
- S3 버킷 - 속성 - 버전관리 : 활성화
    - 삭제 후 객체에서 버전 표시 → 삭제 마커 선택 후 영구 삭제시 복구 가능

# ▪︎ Glacier

- 저렴한 데이터 보관 및 장기 백업
    - 몇 개월, 몇 년 또는 수 십 년 동안 데이터 비용 효율적으로 저장 가능
- 안전성, 내구성
- 복원 시간  → 오래 걸림

# ▪︎ CloundFront

## ▫︎  개요

- AWS CDN 관리형 서비스
    - CDN(Contents Delivery Network) : 컨텐츠 전송 네트워크
        - 데이터 사용량이 많은 애플리케이션 웹 페이지 로드 속도를 높이기 위한 서버들의 네트워크
- 캐시의 장점
    - 서버 로드 줄이고, 지연시간 단축

# ▪︎ 로드 밸런서

## ▫︎  기능

- ELB 기능
    - 클라이언트 요청 트래픽들을 여러 대상들에게 자동 분산
    - 장점
        - 상태 확인(healthy check)을 통한 애플리케이션 고가용성
        - HTTPS 지원
        - 애플리케이션 자동 크기 조정 지원

## ▫︎  종류

- ELB 종류
    - ALB(Application Load Balancer)
        - L7 레이어의 애플리케이션 컨텐츠 기반 로드 분산
        - HTTP, HTTPS 기반
    - NLB(Network Load Balancer)
        - L4 레이어의 IP, Port 기반 로드 분산
        - TCP, UDP 기반
        - 게임, 채팅 등에 사용
    - CLB(Classic Load Balancer)
        - 예전 버전
        - 기존 LB 호환 용도
        - 요즘은 사용 권장하지 않음

# ▪︎ EC2 오토 스케일링

## ▫︎  EC2 Auto Scaling

- 애플리케이션 부하 처리할 수 있는 EC2 인스턴스 수량을 min과 max 수량 사이에서 자동 추가 및 제거 통해 유지
- 확장 축소 개념
    - Scale-out vs Scale-in (수평 확장/축소)
    - Scale-up vs Scale-down (수직 확장/축소)

## ▫︎  장점

- 향상된 가용성
- 비용 절감

## ▫︎  요소

- ASG(Auto Scaling Group)
    - min/max/desired
- 시작 템플릿 : 인스턴스 구성 정보 지정
    - AMI, 인스턴스 유형, 보안그룹, 키페어 등
- 오토스케일링 정책

## ▫︎  오토 스케일링 정책

- 수동
- 자동
    - 예약된 일정
    - 초기값 유지
    - 동적 조정정책
        - 단순 조정정책
        - 단계 조정정책
        - 대상추적 조정정책
- 예측기반

# ▪︎ AWS 실습

## ▫︎  EC2

- 보안그룹 생성1
    - 이름 : sgalb
    - 설명 : sg for alb
    - MyVPC 설정
    - 인바운드 규칙
        - 유형 : HTTP
        - 소스 유형 : Anywherer-IPv4
- 보안그룹 생성2
    - 이름 : sgweb
    - 설명 : sg for web
    - MyVPC 설정
    - 인바운드 규칙
        - 유형 : HTTP
        - 소스 유형 : 사용자 지정
        - 소스 : sg 검색 → sgalb것 선택
            - alb를 통해서 오는 것만 통과
- 로드 밸런싱 → 대상그룹
    - 대상 그룹 생성
        - 인스턴스 선택
        - 이름 : mytg
        - VPC : MyVPC 선택
        - 대상 그룹 생성
- 로드 밸런싱 → 로드밸런서
    - 로드 밸런서 생성
        - ALB 생성
        - 이름 : myalb
        - MyVPC 설정
        - **가용 영역 및 서브넷**
            - 2a → MyPubSubnet
            - 2c → MyPubSubnet2
        - 보안그룹
            - default 제거
            - sgalb 선택
        - mytg 선택
- 인스턴스 : 시작 템플릿 → 내 AMI 선택
    - 이름 : mytpl
    - 내 소유 → myami01 선택
    - 인스턴스 유형 : t3.micro
    - 보안그룹 : 기존 보안그룹 → sgweb
    - 키 페어 설정 → 시작 템플릿 생성

## ▫︎  Auto Scailing

- EC2 → Auto Scailing 그룹 생성
- 버전 : mytpl → Default(1)
- 이름 : myasg
- 네트워크 : MyVPC 선택
- 서브넷 : apne1-az1, apne1-az4 (Pri Subnet 둘 선택)
- 기존 로드밸런서에 연결 → 대상 그룹에서 선택 → mytg
- 원하는 용량 2 / 최소 용량 2 / 최대 용량 2

<aside>
🔒

대상 그룹에 Healthy check 확인

![image_03](/assets/img/sk_shieldus_26/250724_image_03.png)

</aside>

## ▫︎  EC2 인스턴스 생성

- ec2 생성시 오토 스케일링 적용됨
    
![image_04](/assets/img/sk_shieldus_26/250724_image_04.png)
    
- 하나 종료(삭제)
    
![image_05](/assets/img/sk_shieldus_26/250724_image_05.png)
    
- 최소 용량 2개라 새로운 인스턴스 생성됨
    
![image_06](/assets/img/sk_shieldus_26/250724_image_06.png)
    

# ▪︎ 제거

## ▫︎  만든 것 제거

- 역순으로 제거
- 오토 스케일링 삭제 → 로드 밸런서 삭제 → 대상 그룹 삭제 → AMI 삭제 (AMI 등록 취소 + 스냅샷도 삭제)
- 오토 스케일링 삭제 후 인스턴스 종료(삭제)