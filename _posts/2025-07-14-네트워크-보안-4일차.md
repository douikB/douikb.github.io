---
title: "[25/07/14] - ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ (4ì¼ì°¨)"
date: 2025-07-14 00:00:00 +0900
categories: ['SK ë£¨í‚¤ì¦ˆ êµìœ¡','ë„¤íŠ¸ì›Œí¬ ë³´ì•ˆ']
tags: ['êµìœ¡']
---

<!--more-->



---

# â–ªï¸ Wireshark

## â–«ï¸  ìº¡ì³í•„í„°

- ë°ì´í„° ìˆ˜ì§‘ì— ëŒ€í•œ ì œí•œ ë‘ëŠ” ê²ƒ
- ìº¡ì³ í•„í„° ë¬¸ë²•
- ìˆ˜ì§‘í•œ íŒ¨í‚·ì˜ ìë™ íŒŒì¼í™”
- ì •ì§€ ë°©ë²•

## â–«ï¸  ë¶„ì„

- ë²ˆì—­ â†’ í†µì§¸ë¡œ ë¶„ì„ (Compiler ë°©ì‹)
- í†µì—­ â†’ ë¼ì¸ì— ëŒ€í•œ ë¶„ì„ (Interpreter ë°©ì‹)
    - Wiresharkê°€ ì¸í„°í”„ë¦¬í„° ë°©ì‹ ì“°ê³  ìˆìŒ

# â–ªï¸ Tshark

- CMDì—ì„œ ì‚¬ìš©ì‹œ ê´€ë¦¬ì ëª¨ë“œë¡œ ì‹¤í–‰í•´ì•¼ í•¨

## â–«ï¸  í•˜ë“œì›¨ì–´ í™•ì¸

```bash
tshark -D
```

![image_01](/assets/img/sk_shieldus_26/250714_image_01.png)

## â–«ï¸  íŒ¨í‚· ìˆ˜ì§‘

```bash
tshark -i (í•˜ë“œì›¨ì–´ ë²ˆí˜¸)
```

![image_02](/assets/img/sk_shieldus_26/250714_image_02.png)

- Ctrl+Cë¡œ ê°•ì œ ì¤‘ë‹¨

## â–«ï¸  íŒ¨í‚· ìˆ˜ì§‘ ì •ë³´ ì €ì¥

```bash
tshark -i 7 -w TST.pcapng
```

![image_03](/assets/img/sk_shieldus_26/250714_image_03.png)

![image_04](/assets/img/sk_shieldus_26/250714_image_04.png)

## â–«ï¸  íŒ¨í‚· í™•ì¸

```bash
tshark -r TST.pcapng
```

![image_05](/assets/img/sk_shieldus_26/250714_image_05.png)

## â–«ï¸  íŒ¨í‚· ìˆ˜ì§‘ í›„ ìë™ ì •ì§€

```bash
tshark -i 7 -a files:3 -b duration:10 -w TST.pcapng
```

![image_06](/assets/img/sk_shieldus_26/250714_image_06.png)

![image_07](/assets/img/sk_shieldus_26/250714_image_07.png)

- -a fiile:3 - 3ê°œíŒŒì¼ ìˆ˜ì§‘í›„ ìë™ ì •ì§€
- -b duration:10 - 10ì´ˆ í›„ ë‹¤ìŒ íŒŒì¼ ìƒì„±
- -w TST.pcapng : íŒŒì¼ ì €ì¥(íŒŒì¼ëª… ì§€ì •)

## â–«ï¸  íŒ¨í‚· í•„í„° ì¡°ê±´

```bash
# TCP í¬íŠ¸ 443ì¸ ê²½ìš°ë§Œ ìˆ˜ì§‘
tshark -i 3 -f "tcp port 443" -w test.pcapng

# TCP í¬íŠ¸ 443ì¸ ê²½ìš°+192.168.1.1ì´ í˜¸ìŠ¤íŠ¸ì¸ ê²½ìš° ìˆ˜ì§‘
tshark -i 3 -f "tcp port 443 and host 192.168.1.1" -w test.pcapng
```

## â–«ï¸  MSS (Maximum Segment Size)

- 4ê³„ì¸µ ë‹¨í¸í™”
- TCPìƒì—ì„œ ì „ì†¡í•  ìˆ˜ ìˆëŠ” ì‚¬ìš©ì ë°ì´í„°ì˜ ìµœëŒ€ í¬ê¸°
- ìµœì  MSS = MTU -IP Header í¬ê¸° (ìµœì†Œ 20Byte) -TCP Header í¬ê¸° (ìµœì†Œ 20Byte)
    - IP MTU = IP Header + IP Data â†’ 1500byteë¥¼ ë„˜ì–´ê°€ë©´ ì•ˆë¨ = 3ê³„ì¸µ PDU
        - ëœì¹´ë“œì— ë”°ë¼ ì‚¬ì´ì¦ˆ ë‹¬ë¼ì§
    
![image_08](/assets/img/sk_shieldus_26/250714_image_08.png)
    
    - í•œ ë²ˆì— ë‚´ë³´ë‚¼ ìˆ˜ ìˆëŠ” ì‚¬ì´ì¦ˆ = 1518byte (MTU + Ethernet Header 14byte + FCS 4byte)
        - ëœì¹´ë“œ(2ê³„ì¸µ)ê°€ ë‚´ë³´ëƒ„

## â–«ï¸  Windowsì—ì„œ MTU ì‚¬ì´ì¦ˆ í™•ì¸

- `netsh` ëª…ë ¹ì–´ ì‚¬ìš©
    
![image_09](/assets/img/sk_shieldus_26/250714_image_09.png)
    
    - MTU ì„¤ì • ë³€ê²½ ê°€ëŠ¥

# â–ªï¸ ë‹¨í¸í™”

## â–«ï¸  UDP

- ë‹¨í¸í™” ì•ˆí•¨
- UDPëŠ” ë°ì´í„° í•­ìƒ ì‹£ê³  ê°€ì•¼í•¨

## â–«ï¸  TCP

- ë‹¨í¸í™” í•¨
- ë°ì´í„°ë¥¼ í•­ìƒ ì‹£ê³  ê°ˆ ìˆ˜ë„ ìˆìŒ
- Urgent pointer â†’ ì „ì†¡ ìˆœì„œ ë³€ê²½ì‹œì— ì‚¬ìš©í•¨

## â–«ï¸  UDP ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„° ì „ì†¡

- í—¤ë” ìš©ëŸ‰ê¹Œì§€ ê³„ì‚°í•´ì„œ 1500byteì—¬ì•¼ í•¨
    
![image_10](/assets/img/sk_shieldus_26/250714_image_10.png)
    

## â–«ï¸  TCP ê¸°ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ ë°ì´í„° ì „ì†¡

- MSSê°€ 1500byte
    
![image_11](/assets/img/sk_shieldus_26/250714_image_11.png)
    

<aside>
ğŸ’¡

TCPì—ì„œ ë‹¨í¸í™” ì¡°ê±´

MSS > payload : ë‹¨í¸í™” í•˜ì§€ ì•ŠìŒ (ì˜ˆ) 5000 > 4000 â‡’ ë‹¨í¸í™” ì•ˆí•¨

MSS < payload : ë‹¨í¸í™” í•¨            (ì˜ˆ) 2000 < 4000 â‡’ ë‹¨í¸í™” í•¨

</aside>

- 3ê³„ì¸µ ë‹¨í¸í™”ë³´ë‹¤ 4ê³„ì¸µì—ì„œ ë‹¨í¸í™” í•˜ëŠ”ê²ƒ ê¶Œì¥
    - TCPì—ì„œë§Œ
    - ì¬ì¡°ë¦½ ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆì–´ì„œ
        - Sequence Number ë²ˆí˜¸ë§Œìœ¼ë¡œ ì¬ì¡°ë¦½ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸
    - 3ê³„ì¸µì—ì„  ì¬ì¡°ë¦½ì‹œ ID, Offset, Flagê¹Œì§€ í™•ì¸í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì¬ì¡°ë¦½ ì‹œê°„ì´ ë§ì´ ê±¸ë¦¼
    - ë‹¨ 4ê³„ì¸µì—ì„œ ë‹¨í¸í™”ì‹œ MSS ì‚¬ì´ì¦ˆ ê³ ë ¤í•´ì•¼ë¨

# â–ªï¸ IP Header

## â–«ï¸  ì˜¤ë¥˜ ê²€ì¶œ

- ìˆ˜ì‹ ëœ ë°ì´í„°ì˜ ë¬´ê²°ì„± ê²€ì¦ ê³¼ì •
- ì†¡ì‹ ì : ì˜¤ë¥˜ ê²€ì¶œì½”ë“œ ì²¨ë¶€
- ìˆ˜ì‹ ì : ì²¨ë¶€ëœ ì˜¤ë¥˜ ê²€ì¶œì½”ë“œ ê¸°ë°˜ ë¬´ê²°ì„± ì ê²€
- **ìƒì„±ë°©ë²•** â†’ í”„ë¡œí† ì½œë§ˆë‹¤ ë‹¤ë¦„
    - TCP, UDP â†’ checksum ê°’ì—ëŠ” â€œí—¤ë” + ë°ì´í„°â€ (ë°ì´í„°ì˜ ë¬´ê²°ì„± ì ê²€)
    - IP â†’  Headerì— ëŒ€í•œ ë¬´ê²°ì„±ë§Œ ì ê²€ ê°€ë¯„

# â–ªï¸ ICMP

- IP Protocolì€ ì‹ ë¢°ì„± ì—†ê³  ë¹„ì—°ê²°í˜•(UDP ì„±í–¥ê³¼ ë¹„ìŠ·) + ì—ëŸ¬ ë°œìƒ ì›ì¸ì´ë‚˜ ì§„ë‹¨ ê¸°ëŠ¥, ìƒí™©ì •ë³´ ì§€ì› ì•ˆí•¨
    - UDP ë¹„ì‹ ë¢°ì„±, ë¹„ì—°ê²°ì„± â†’ TCP
    - IP ë¹„ì‹ ë¢°ì„±, ë¹„ì—°ê²°ì„± â†’ ICMP
    - **IPì˜ ë‹¨ì  ë³´ì™„**

## â–«ï¸  Ping

- -f ì˜µì…˜ : ë‹¨í¸í™”ê°€ ì•ˆë¨
- -l ì˜µì…˜ : íŒ¨í‚· ë°ì´í„° ì„¤ì •í•¨
    - MTU ë„˜ì–´ê°€ë©´ ë‹¨í¸í™”ë¨

## â–«ï¸  ICMP Code

![image_12](/assets/img/sk_shieldus_26/250714_image_12.png)

![image_13](/assets/img/sk_shieldus_26/250714_image_13.png)

- Echo Request = íƒ€ì…:8, ì½”ë“œê°’:0, ì§ˆì˜ë©”ì‹œì§€
- Echo Reply = íƒ€ì…:0, ì½”ë“œê°’:0, ì§ˆì˜ë©”ì‹œì§€

# â–ªï¸ Ethernet Frame êµ¬ì¡°

![image_14](/assets/img/sk_shieldus_26/250714_image_14.png)

- Typeì´ ë‚˜ì˜¤ëŠëƒ, Lengthê°€ ë‚˜ì˜¤ëŠëƒì˜ ì°¨ì´

## â–«ï¸  Wireshark í™•ì¸

![image_15](/assets/img/sk_shieldus_26/250714_image_15.png)

ethernetFrame.pcapng