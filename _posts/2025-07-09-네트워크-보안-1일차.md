---
title: "[25/07/09] - 네트워크 보안 (1일차)"
date: 2025-07-09 00:00:00 +0900
categories: ['SK 루키즈 교육']
tags: ['교육']
image: images/thumbnail.png
---

<!--more-->




---

# ▪︎ 네트워크 보안

- 내/외부망 트래픽 흐름 → 네트워크 개요
- 와이어샤크를 이요한 TCP/IP 프로토콜 분석

⇒ 7/9 ~ 11까지 진행

- 네트워크 해킹(공격) → 시그니처 확인
- 사내망/보안망 구석
- NIDS(Snort Rule)

⇒ 7/14 ~ 17 까지 진행

# ▪︎ 논리적 주소(3계층)

- 종류
    - appletalk
    - ipx
    - **ip**

## ▫︎  IP

- Network ID + Host ID
- 서브넷 마스크 기능
    - Network, Host 구분

# ▪︎ 물리적 주소(2계층)

- 종류
    - token ring
    - fddi
    - ethernet
- NIC 또는 ethernet card
- 데이터링크 계층의 mac 계층에 의해 사용되는 48비트 하드웨어 주소
- 앞의 6자리는 제조사코드
    - 제조사 코드 관리 기관 : IEEE

# ▪︎ FQDN(7계층)

- 호스트명 + 도메인명
- 문자주소

# ▪︎ DNS & ARP

## ▫︎  DNS

- FQDN, 문자주소로 IP Address 조회(nslookup)

## ▫︎  ARP

- IP 주소를 가지고 MAC 주소 풀이(resolution)

# ▪︎ Port Number(4계층)

- 데이터 송수신 번호
- 서비스/애플리케이션 번호
- 2^16 = 65535개 표현
- 애플리케이션에 부탁해 전송

# ▪︎ NIC

- 인터넷 주소 자원 정보 관리 기관
- ICANN에서 운영 세계 각국에 네트워크 정보 센터(NIC)가 있음
- 한국에서는 KISA 산하에 KRNIC이 있음
    - 국내 IP/도메인 등록 관리

## ▫︎  전송모드

- Unicast 1:1 (송:수)
- Broadcast 1:m(불특정다수)
- Multicast 1:n(특정다수)

# ▪︎ 브로드캐스트 주소

- 가상 주소
- 시스템/애플리케이션 운영시 사용됨
    - 시스템 : 운영체제
- 운영체제 설치시 할당
    - BIP : 255.255.255.255
        - limited broadcast(local) : 255.255.255.255 (로컬)
        - directed braodcast : 192.168.1.255 (다이렉트)
    - BMAC : ff.ff.ff.ff.ff.ff

# ▪︎ 멀티캐스트 주소

- 가상 주소
- 시스템/애플리케이션 운영시 사용됨
    - 시스템 : 운영체제
- 운영체제/애플리케이션 설치시 할당
    - IP : 224~239.X.X.X
    - BMAC :  0100.5EXX.XXXX
- MAC → 25비트까지 제조회사 번호로 봄
    - 25bit까지 멀티캐스트 패턴이어야 함
- 수신지 IP를 보고 확인하는게 좋음

# ▪︎ ARP

- IP 주소에 대응되는 MAC주소를 조회 변환해주는 서비스
- 패킷 종류
    - ARP request여
        - 질의 패킷
        - 브로드캐스트 방식으로 운영
    - ARP reply
        - 응답 패킷
        - 유니캐스트 방식으로 운영

## ▫︎  ARP 캐시테이블

- IP add:MAC add로 구성
- 정적은 껐다 켜도 유지
- 동적은 유지 안됨
    - 에이징 타임층 : 갱신 시간

## ▫︎  게이트웨이

- 망과 망 연결

## ▫︎  PING 작업

1. arp 캐시 테이블 조회
2. arp request
3. arp reply(arp 캐시테이블 등록)
4. echo request
5. echo reply

# ▪︎ 허브(1계층)

- 스위치허브 → 2계층으로 봐야
- 플러딩 방식으로만 전달
- 경로DB X

# ▪︎ Forwarding / Flooding

## ▫︎  Forwarding

- 하나의 송신지 포트에서 하나의 수신지 포트로 트래픽 전송
- 목적지가 경로 DB에 있는 경우

## ▫︎  Flooding

- 송신지 포트를 제외한 나머지 포트들로 트래픽 전송
- 브로드캐스트/멀티 캐스트는 플러딩으로 전송
- 목적지가 경로 DB에 없는 경우

# ▪︎ 스위치(2계층)

- MAC Address Table = 경로 데이터 베이스
    - MAC add:출구번호
    - 브로드캐스트, 멀티캐스트 주소 등록하지 않음

# ▪︎ 라우터(3계층)

- 경로에 없는 경우 브로드캐스트 하지않고 폐기함(가장 큰 차이)
- 경로 DB 이름 : Routing table(Network ID:Port번호)

<aside>
🤩

허브(하) : 플러딩

스위치(중) : 플러딩, 포워딩

라우터(상) : 포워딩

⇒ 상으로 갈수록 필터가능

⇒ 스위치, 라우터는 경로DB가 있다

</aside>

# ▪︎ Media Translation

- 3계층 이상 장비에서 처리
- 패킷이 출발지 → 목적지 가는 동안 3계층 장비 거칠 때마다 L2 헤더(프레임헤더) 변경
    - 3계층 주소(IP 주소) 변환 없음
    - 2계층 주소는 스위칭 환경에 따라 변환
- 외부 망으로 패킷 보낼때는 MAC에 GW Mac address가 옴

# 강의 요약 (1일차)

## 1. 네트워크 주소 체계

### MAC 주소 (2계층)

- **정의**: 디바이스의 물리적 주소, 네트워크 인터페이스 카드(NIC)에 고유하게 할당.
- **구성**: 제조회사 코드(3바이트) + 일련번호(3바이트).
    - 예: `1111.2222.1111`.
- **역할**: 데이터 링크 계층에서 디바이스 간 통신 시 식별.
- **보안 관련**: MAC 주소는 스위치의 MAC 주소 테이블을 통해 트래픽을 관리하지만, MAC 스푸핑 공격으로 위조 가능.
    - **설명**: 공격자가 MAC 주소를 위조해 네트워크에서 다른 디바이스로 가장할 수 있음. 이를 방지하려면 스위치에서 포트 보안 설정 필요.

### IP 주소 (3계층)

- **정의**: 네트워크 계층에서 디바이스 식별 및 네트워크 간 통신을 위한 논리적 주소.
- **구성**: 네트워크 ID + 호스트 ID.
    - 예: `192.168.1.10` (네트워크 ID: `192.168.1.0`, 호스트 ID: `10`).
- **역할**: 네트워크와 호스트를 구분해 라우팅 가능.
- **보안 관련**: IP 스푸핑은 출발지 IP를 위조해 공격하는 방식. 방화벽과 NAT(Network Address Translation)로 방어 가능.
    - **설명**: IP 주소는 공인/사설로 나뉘며, 사설 IP(예: 192.168.x.x)는 내부망에서 사용. 공인 IP는 인터넷에서 라우팅 가능하며, DDoS 공격 타겟이 될 수 있음.

### 포트 번호 (4계층)

- **정의**: 전송 계층에서 애플리케이션/서비스를 식별하는 번호.
- **종류**:
    - **Well-Known Port (0-1023)**: ICANN이 특정 서비스에 예약 (예: HTTP 80, HTTPS 443).
    - **Registered Port (1024-49151)**: 신규 애플리케이션 등록 가능.
    - **Dynamic Port (49152-65535)**: 운영체제에서 동적으로 할당, 개인 용도.
- **역할**: 데이터가 올바른 애플리케이션으로 전달되도록 보장.
- **보안 관련**: 포트 스캐닝 공격은 열린 포트를 탐지해 취약점을 찾음. 방화벽에서 불필요한 포트를 차단해야 함.
    - **설명**: 예를 들어, 포트 22(SSH)가 열려 있으면 공격자가 무차별 대입 공격(Brute Force)을 시도할 수 있음. 따라서 강력한 인증과 포트 필터링 필요.

### FQDN (7계층)

- **정의**: Fully Qualified Domain Name, 사용자 친화적 네트워크 주소.
- **구성**: 호스트명 + 도메인명.
    - 예: `www.test.com` (호스트명: `www`, 도메인명: `test.com`).
- **역할**: IP 주소를 사람이 읽기 쉬운 형태로 변환.
- **보안 관련**: DNS 스푸핑이나 피싱 공격은 FQDN을 위조해 사용자를 악성 사이트로 유도. DNSSEC로 보안 강화 가능.
    - **설명**: DNS 조회는 IP 주소를 알아내기 위해 필수적이며, hosts 파일이나 DNS 서버를 통해 수행. 피싱 방지를 위해 신뢰할 수 있는 DNS 서버 사용 권장.

## 2. 내부망 vs 외부망

- **내부망**:
    - 송신자와 수신자의 네트워크 ID가 동일 (예: `192.168.1.0` 네트워크 내).
    - 스위치를 통해 직접 통신.
- **외부망**:
    - 네트워크 ID가 다름 (예: `192.168.1.0` → `192.168.5.0`).
    - 라우터(게이트웨이)를 통해 통신.
- **송신자와 수신자**:
    - 송신자: 데이터를 보내는 측.
    - 수신자: 데이터를 받는 측.
- **보안 관련**: 내부망은 비교적 안전하지만, 외부망 통신은 방화벽, NAT, VPN으로 보호해야 함.
    - **설명**: 내부망은 VLAN으로 세분화해 보안을 강화할 수 있음. 외부망은 DMZ(DeMilitarized Zone)를 설정해 외부 접근을 제한.

## 3. 전송 모드

- **Unicast**:
    - 1:1 통신.
    - 예: IP `192.168.1.10`, MAC `1111.2 222.1111`.
    - **보안 관련**: 가장 일반적이며, 타겟이 명확해 보안 관리가 쉬움.
- **Broadcast**:
    - 1:다수 통신.
    - **Limited Broadcast**: `255.255.255.255` (로컬 네트워크).
    - **Directed Broadcast**: `192.168.1.255/24` (특정 네트워크).
    - MAC 주소: `FFFF.FFFF.FFFF`.
    - **보안 관련**: 과도한 브로드캐스트는 네트워크 부하(브로드캐스트 스톰)를 유발. 스위치에서 브로드캐스트 제한 설정 필요.
        - **설명**: ARP Request는 브로드캐스트로 동작하며, 이를 이용한 ARP 스푸핑 공격 가능.
- **Multicast**:
    - 특정 그룹으로 전송.
    - IP 범위: `224.0.0.0 ~ 239.255.255.255`.
    - 예: `224.0.0.22` (IGMPv3, MAC `01-00-5E-00-00-16`), `239.255.255.250` (Device Discovery, MAC `01-00-5E-7F-FF-FA`).
    - **보안 관련**: 멀티캐스트는 그룹 통신 효율적이지만, IGMP 스누핑 설정으로 무단 접근 방지 필요.
        - **설명**: 멀티캐스트는 스트리밍 서비스(예: IPTV)에 사용되며, 네트워크 장비에서 멀티캐스트 라우팅 설정 필요.

## 4. ARP (Address Resolution Protocol)

- **정의**: IP 주소를 MAC 주소로 변환하는 프로토콜.
- **패킷 종류**:
    - **ARP Request**: MAC 주소 조회, 브로드캐스트 방식.
    - **ARP Reply**: 요청에 대한 응답, 유니캐스트 방식.
- **ARP Cache Table**:
    - IP와 MAC 주소 매핑 저장.
    - 확인 명령: `arp -a`.
- **보안 관련**: ARP 스푸핑은 가짜 ARP Reply로 네트워크 트래픽을 가로채는 공격. 동적 ARP 검사(Dynamic ARP Inspection)로 방어.
    - **설명**: ARP는 2계층에서 필수적이지만, 신뢰 기반 프로토콜로 보안 취약점이 있음. 네트워크 모니터링으로 이상 징후 감지 필요.

## 5. 네트워크 장비

- **Hub (1계층)**:
    - 물리적 신호 전달, 모든 포트로 데이터 전송 (Flooding).
    - **보안 관련**: 모든 트래픽이 노출되므로 스니핑에 취약. 현대 네트워크에서는 거의 사용되지 않음.
- **Switch (2계층)**:
    - MAC 주소 기반 포워딩.
    - **MAC Address Table**: 목적지 MAC과 포트 매핑 (예: `A.M → 포트 1`).
    - **Forwarding**: 1:1 전송.
    - **Flooding**: 알 수 없는 MAC 주소일 경우 모든 포트로 전송.
    - **보안 관련**: VLAN으로 네트워크 분리, 포트 보안으로 MAC 주소 제한 가능.
        - **설명**: 스위치는 효율적이지만, MAC 플러딩 공격으로 테이블을 오버플로우 시킬 수 있음.
- **Router (3계층)**:
    - IP 주소 기반 라우팅.
    - 네트워크 간 데이터 전달.
    - **보안 관련**: ACL(Access Control List)로 트래픽 제어, NAT로 사설 IP 보호.
        - **설명**: 라우터는 외부망 연결의 핵심 장비로, 방화벽 기능 통합 가능.
- **Media Translation**:
    - 3계층 이상 장비에서 L2 헤더(MAC 주소) 변경, IP 주소는 유지.
    - **보안 관련**: 헤더 변경 시 데이터 무결성 확인 필요.

## 6. 네트워크 정보 센터 (NIC)

- **정의**: IP 주소, 도메인 등 인터넷 자원 관리.
- **기관**:
    - 국제: ICANN (Internet Corporation for Assigned Names and Numbers).
    - 국내: KISA 산하 KRNIC (Korea Network Information Center).
- **보안 관련**: 도메인 하이재킹 방지를 위해 DNS 등록 정보 보호 중요.
    - **설명**: KRNIC은 국내 IP 할당과 WHOIS 서비스를 통해 보안 위협 추적 지원.

## 7. 트래픽 흐름

### 내부망 트래픽 흐름

1. **DNS 조회**:
    - 수신지 IP 주소 확인.
    - 방법:
        - DNS 캐시 (`ipconfig /displaydns`).
        - Hosts 파일 (`C:\Windows\System32\drivers\etc\hosts`).
        - DNS 서버 질의.
    - **보안 관련**: Hosts 파일 변조는 로컬 피싱 공격으로 이어질 수 있음.
2. **내부망/외부망 확인**:
    - 서브넷 마스크로 네트워크 ID 비교.
    - 예: `192.168.1.10/24`와 `192.168.1.20/24`는 동일 네트워크.
3. **MAC 주소 조회**:
    - ARP 캐시 확인.
    - 없으면 ARP Request/Reply로 MAC 주소 획득.
    - **보안 관련**: ARP 스푸핑 방지 위해 ARP 테이블 모니터링.
4. **트래픽 전송**:
    - 스위치를 통해 수신지로 전달.
    - **보안 관련**: 스위치에서 VLAN 설정으로 트래픽 격리.

### 외부망 트래픽 흐름

1. **DNS 조회**:
    - 내부망과 동일.
2. **내부망/외부망 확인**:
    - 서브넷 마스크로 외부망 확인.
3. **게이트웨이 MAC 주소 조회**:
    - ARP로 기본 게이트웨이 MAC 주소 획득.
    - **보안 관련**: 게이트웨이 위조 시 데이터 유출 가능.
4. **Media Translation 및 전송**:
    - 라우터에서 L2 헤더 변경 후 외부망으로 전달.
    - **보안 관련**: NAT와 방화벽으로 외부 접근 제어.

## 추가 노트

- **정보보안 관점**:
    - **ARP 스푸핑**: 가짜 ARP Reply로 트래픽 가로채기. 동적 ARP 검사와 정적 ARP 테이블로 방어.
    - **포트 스캐닝**: Nmap 같은 도구로 열린 포트 탐지. 방화벽에서 불필요한 포트 차단.
    - **DNS 스푸핑**: 악성 DNS 응답으로 피싱 유도. DNSSEC와 신뢰할 수 있는 DNS 서버 사용.
    - **브로드캐스트/멀티캐스트**: 네트워크 부하 관리와 IGMP 스누핑으로 보안 강화.
- **실습 명령어**:
    - `ipconfig /displaydns`: DNS 캐시 확인.
    - `arp -a`: ARP 캐시 테이블 확인.
    - `ping` 또는 `tracert`: 네트워크 경로 확인.
- **KRNIC의 역할**: IP/도메인 관리로 보안 위협 추적, WHOIS 조회로 공격자 정보 확인 가능.